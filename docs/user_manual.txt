Руководство пользователя

1. Назначение

Программное обеспечение spgate предназначено для опроса параметров приборов учета и предоставления данных параметров ПО верхнего уровня. Целевой платформой приложения является контроллер SMH4 c операционой системой семейства linux. Приложение поддерживает взаимодействие с приборами учета:
    - СПТ96?, СПГ76? по протоколу сп-бас
    - СПТ94?, СПГ74? по протоколу рс-бас
Протоколом взамодействия с ПО верхнего уровня является modbus-tcp.


2. Конфигурация

Пример конфигурции приложения с подробными комментариями вы можете найти в файле:
spgate/cfg/default.ini

Требуется перезапуск приложения каждый раз после изменения конфигурации.


3. Запуск приложения

Приложение размещается на носителе контроллера SMH4 и запускается автоматически. Во время запуска приложения предусмотрена возможность передать некоторые параметры через аргументы:
    -c,--config FILENAME - параметр позволяет задать конфигурационный файл.
                           По умолчанию: ../cfg/default.ini
    -i,--cli_port NUMBER - позволяет задать порт консоли telnet.
                           По умолчанию: 0 - отключен


4. Диагностика

Приложние поддреживает функции логирования системных сообщений с целью выявления различных нештатных ситуаций. Логирование сообщений может выполняется в консоль(stdout) или в указанный файл.
Уровень логирования сообщений возможно задать несколькими способами:
    - задать переменную окружения перед запуском приложения(допустимы LD | LI | LW | LE)
      $ export SG_LOGLVL=LE
    - через консоль приложения установить требуемый уровень логирования.
      $ telnet 0 10000
      $ cli> log level=0
      $ cli> exit

Для выбора режима работы логирования следует воспользоваться переменной окружения:
    - задать переменную окружения перед запуском приложения(допустимы CON | FILE)
      $ export SG_LOGOUT=CON

Так же возможно указать файл логирования для этого необходимо:
    - задать переменную окружения:
      $ export SG_LOGFILE=/tmp/spgate.log


